<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
  <title>DMAssassins</title>
  <link rel="stylesheet" type="text/css" href="/bower_components/bootstrap/dist/css/bootstrap.css">
  <link rel="stylesheet" type="text/css" href="/bower_components/fontawesome/css/font-awesome.css">  
  <link rel="stylesheet" type="text/css" href="/bower_components/bootstrap-social-buttons/social-buttons.css">  
  <link rel="stylesheet" type="text/css" href="/bower_components/datatables/media/css/jquery.dataTables.css">
  <link rel="stylesheet" type="text/css" href="/bower_components/datatables-bootstrap3/BS3/assets/css/datatables.css">
  <link rel="stylesheet" type="text/css" href="assets/styles/site.css">    	
	<script type="text/template" id="nav-template">
	
		<nav class="navbar navbar-default" role="navigation">
		  <div class="container">
			<!-- Brand and toggle get grouped for better mobile display -->
			<div class="navbar-header">
				<button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
				<span class="sr-only">Toggle navigation</span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
				</button>
				<a class="navbar-brand" href="#">DMAssassins</a>
			</div>
		
			<!-- Collect the nav links, forms, and other content for toggling -->
			<div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
				<ul class="nav navbar-nav">
				<%
					_.each(left, function(item) {
						if (typeof(item) == 'object') {
							_.each(item, function(dropdown_items, dropdown_title) {
				%>
							<a href="#" class="dropdown-toggle" data-toggle="dropdown"><%=dropdown_title%><span class="caret"></span></a>
							<ul class="dropdown-menu" role="menu">
				<%
								_.each(dropdown_items, function(dropdown_item) {
				%>
									<li id="nav_<%=dropdown_item.toLowerCase().replace(' ','_') %>" class="nav_item"><a href=#<%=dropdown_item.toLowerCase().replace(' ','_')%>><%=dropdown_item%></a></li>
				<%	
								})
				%>
							</ul>	
				<%
							})
						}
						else {
				%>
							<li id="nav_<%=item.toLowerCase().replace(' ','_') %>" class="nav_item"><a href=#<%=item.toLowerCase().replace(' ','_')%>><%=item%></a></li>
				<%  
							}
						})
				%>

				</ul>
							
				<ul class="nav navbar-nav navbar-right">
					<li class="dropdown">
	
					<%
						_.each(right, function(item) {
							if (typeof(item) == 'object') {
								_.each(item, function(dropdown_items, dropdown_title) {
					%>
								
								<li class="nav_item dropdown_parent" id="<%=dropdown_title.toLowerCase().replace(' ','_')%>_parent">
									<a href="#" class="dropdown-toggle" data-toggle="dropdown">
										<div class="hidden-sm">
											<span id="<%=dropdown_title.toLowerCase().replace(' ','_')%>_header" >
												<%=dropdown_title%>
											</span>
											<span class="caret"></span>										
										</div>
										<div  class="visible-sm">
											<span id="<%=dropdown_title.toLowerCase().replace(' ','_')%>_header_short">
												<%=dropdown_title%>
											</span>
											<span class="caret"></span>
										</div>
									</a>
									<ul class="dropdown-menu" role="menu" id="<%=dropdown_title.toLowerCase().replace(' ','_')%>_dropdown">
					<%
										_.each(dropdown_items, function(dropdown_item) {
					%>
											<li id="nav_<%=dropdown_item.toLowerCase().replace(' ','_') %>" dropdown="<%=dropdown_title.toLowerCase().replace(' ','_')%>" class="nav_item dropdown_item"><a href=#<%=dropdown_item.toLowerCase().replace(' ','_')%> ><%=dropdown_item%></a></li>
					<%	
										})
					%>	
									</ul>
								</li>
					<%
								})
							}
							else {
					%>
								<li id="nav_<%=item.toLowerCase().replace(' ','_') %>" class="nav_item">
									<a href=#<%=item.toLowerCase().replace(' ','_') %>>
										<%=item%>
									</a>
								</li>
					<%  
								}
							})
					%>
	
						 
					</li>
				</ul>
			</div><!-- /.navbar-collapse -->
			
		  </div><!-- /.container-fluid -->
		</nav>
			
	</script>


	<script type="text/template" id="nav-game-template">
		<%
		_.each(games, function(game) {
		%>
			<li id="nav_<%=game.game_id %>" class="nav_item dropdown_item" dropdown="games"><a game_id="<%=game.game_id %>" class="switch_game" href="#switch_game"><%=game.game_name%></a></li>
		<%
		})
		%>
		<li id="nav_create_game" class="nav_item dropdown_item" dropdown="games"><a href="#create_game">Create New Game</a></li>
		<li id="nav_join_game" class="nav_item dropdown_item" dropdown="games"><a href="#join_game">Join New Game</a></li>
	</script>

	<script type="text/template" id="target-template">
		<div class="user_view">
			 <div class="view text-center">
			 	<div id="target_data">
				   	<div class="row">
						<label>Name:</label> <%= properties.name %>
					</div>
					<div class="row">
					 	<label>Email:</label> <%= email %>
					</div>
					<div class="row">
					 	<label>Facebook:</label> <%= properties.facebook %>
					</div>
				</div>
				<% if (properties.team) { %>				
						<div class="row">
						 	<label>Team:</label> <%= properties.team %>
						</div>
					<% } %>
				<div class="row">
					<a class="thumbnail">
					   <img src=<%= properties.photo_thumb %>>
					</a>
				</div>
				<div class="row user_column">
					<form class="form-inline" id="kill_form">
						<input class="form-control" placeholder="Enter Secret" id="secret"/>
						<button type="button" id="kill" class="btn btn-danger">Kill Target</button>
					</form>
					
				</div>
			 </div>
		</div>
		<div class="modal fade" id="photoModal" tabindex="-1" role="dialog" aria-labelledby="photoModal" aria-hidden="true">
		  <div class="modal-dialog">
		 	<img class="img-responsive center-block" src=<%= properties.photo %> />   
		  </div>
		</div>
		
	</script>

	<script type="text/template" id="profile-template">
		<div class="user_view">
			 <div class="view text-center">
			 	<div id="target_data">
				   	<div class="row">
						<label>Name:</label> <%= properties.name %>
					</div>
					<div class="row">
					 	<label>Email:</label> <%= email %>
					</div>
					<div class="row">
					 	<label>Facebook:</label> <%= properties.facebook %>
					</div>
					<% if (properties.team) { %>				
						<div class="row">
						 	<label>Team:</label> <%= properties.team %>
						</div>
					<% } %>
					<div class="row">					 	
					 	<div class="text-danger"><label>Secret:</label> <%= properties.secret %></div>
					 	<p class="text-danger">
					 		Give this to your assassin if they kill you.
					 	</p>
					</div>
				</div>
				<div class="row">
					<a class="thumbnail">
					   <img src=<%= properties.photo_thumb %>>
					</a>
				</div>
				<div class="row user_column">
					<button class="btn btn-block btn-danger" id="quit">Quit Game</button>
				</div>
			 </div>
		</div>
		<div class="modal fade" id="photoModal" tabindex="-1" role="dialog" aria-labelledby="photoModal" aria-hidden="true">
		  <div class="modal-dialog">
		 	<img class="img-responsive center-block" src=<%= properties.photo %> />   
		  </div>
		</div>
		
		<div id="quit_modal_wrapper">
		
		</div>
	</script>
	
	<script type="text/template" id="quit-modal-template">

		<div class="modal fade" id="quit_modal" role="dialog">
		  <div class="modal-dialog">
		    <div class="modal-content">
		      <div class="modal-header">
		        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
		        <h4 class="modal-title">Quit Game</h4>
		      </div>
		      <form class="form-inline" role="form">
			      <div class="modal-body">
			        <p>We're sad to see you go. If you really want to quit <strong><%=quit_game_name%></strong> please confirm by entering your secret:</p>
			         <div class="form-group">
						 <label for="quit_secret" class="sr-only">Secret:</label><input class="form-control" id="quit_secret" type="text" placeholder ="Enter Secret"/>
			         </div>
			      </div>
			      <div class="modal-footer">
				 	<button class="btn btn-default btn-medium" data-dismiss="modal">Nevermind</button>
				 	<button class="btn btn-danger btn-medium" id="quit_game_confirm">Quit</button>
			      </div>
		      </form>  
		    </div><!-- /.modal-content -->
		  </div><!-- /.modal-dialog -->
		</div><!-- /.modal -->
		
	
	</script>

	<script type="text/template" id="select-game-template">
		<div class="container-fluid">
			<img src="/assets/img/logo.png" class="center-block img-responsive logo" />	
			<div id="create-or-join" class="">
				<div class="container col-md-offset-2 col-md-8 text-center">
					<div class="hidden-xs">
						<button class="btn btn-facebook btn-lg show-create-game">Create A Game</button>
						<button class="btn btn-facebook btn-lg show-join-game">Join A Game</button>				
					</div>
					<div class="visible-xs-block">
						<button class="btn btn-facebook btn-block show-create-game">Create A Game</button>
						<button class="btn btn-facebook btn-block show-join-game">Join A Game</button>				
					</div>

				</div>				
			</div>
			<div id="create-game" class="container hide">
				<form class="form-horizontal text-left" role="form">			
					<div class="form-group">
						<h1 class="text-center col-sm-12 col-xs-12">Create a Game</h1>
					</div>
					<div class="form-group">
						<label class="col-sm-5 col-xs-5 control-label" for="create_game_name">Game Name:</label>
						<div class="col-sm-3 col-xs-7">
							<input id="create_game_name" class="form-control"></input>
						</div>
					</div>
					<div class="form-group">
						<label class="col-sm-5 col-xs-5 control-label" for="create_game_need_password">Password protect?:</label>
						<div class="col-sm-3 col-xs-7">
							<input id="create_game_need_password" type="checkbox"</input>
						</div>
					</div>
					<div id="password_block" class="form-group">
						<label class="col-sm-5 col-xs-5 control-label" for="create_game_password">Password:</label>
						<div class="col-sm-3 col-xs-7">
							<input id="create_game_password" class="form-control" disabled></input>
						</div>
					</div>
					<div class="form-group">
						<div class="hidden-xs">
							<div class="col-sm-offset-5 col-sm-2">
								<button class="btn btn-default btn-block create-game-submit">Create</button>							
							</div>
							<div class="col-sm-1">
								<button class="btn btn-danger btn-block create-or-join-back">Back</button>
							</div>
						</div>
						<div class="visible-xs-block">
							<button class="btn btn-default btn-block create-game-submit">Create</button>
							<button class="btn btn-danger btn-block create-or-join-back">Back</button>							
						</div>
					</div>
						
				</form>
			</div>
			<div id="join-game" class="container hide">
				<form class="form-horizontal text-left" role="form">
					<div class="form-group">
						<h1 class="text-center col-sm-12 col-xs-12">Select a Game</h1>
					</div>
					<div class="form-group">
						<label class="col-sm-5 col-xs-5 control-label" for="games">Game:</label>
						<div class="col-sm-3 col-xs-7">
							<select id="games" class="form-control">
								<% _.each(games, function(game){ %>		
									<option value=<%= game.game_id %> game_has_password=<%= game.game_has_password %>><%= game.game_name %> </option>				
								<% }) %>
							</select>
						</div>
					</div>
					<div id="password_block" class="form-group">
						<label class="col-sm-5 col-xs-5 control-label" for="join_game_password">Password:</label>
						<div class="col-sm-3 col-xs-7">
							<input id="join_game_password" class="form-control" disabled></input>
						</div>
					</div>
					<div class="form-group">
						<div class="hidden-xs">
							<div class="col-sm-offset-5 col-sm-2">
								<button class="btn btn-default btn-block join-game-submit">Join</button>							
							</div>
							<div class="col-sm-1">
								<button class="btn btn-danger btn-block create-or-join-back">Back</button>
							</div>
						</div>
						<div class="visible-xs-block">
							<button class="btn btn-default btn-block join-game-submit">Join</button>
							<button class="btn btn-danger btn-block create-or-join-back">Back</button>							
						</div>
					</div>
				</form>
			</div>
		</div>
	</script>

	<script type="text/template" id="login-template">
		<div class="col-md-2"></div>
		<div class="container col-md-8">
			<img src="/assets/img/logo.png" class="center-block img-responsive logo" />
			<button class="btn btn-facebook btn-lg center-block hidden-xs"><i class="fa fa-facebook"></i> | Connect with Facebook</button>			
		</div>
		<div class="col-md-2"></div>
		<button class="btn btn-facebook btn-block center-block visible-xs-block"><i class="fa fa-facebook"></i> | Connect with Facebook</button>
	</script>

	<script type="text/template" id="leaderboard-template">
		<h3>Player Rankings</h3>
		<table class="stripe compact" id="user_leaderboard_table">
			<thead>
				<th style="width:<%=user_col_width%>%">Name</th>
				<% if (teams_enabled) { %>
					<th style="width:<%=user_col_width%>%">Team</th>
				<% } %>
				<th style="width:<%=user_col_width%>%">Alive</th>
				<th style="width:<%=user_col_width%>%">Kills</th>
			</thead>
			<tbody>
					<%
					_.each(users, function(user) {			
					%>
					<tr>
						<td><%=user.name%></td>
						<% if (teams_enabled) { %>
							<td><%= user.team_name %></td>
						<% } %>
						<td><%=user.alive ? 'Yes' : 'No'%></td>
						<td><%=user.kills%></td>						
					</tr>					
					<%
					})
					%>
			</tbody>
		</table>
		<% if (teams_enabled) { %>
			<h3>Team Rankings</h3>
			<table class="stripe compact" id="team_leaderboard_table">
				<thead>
					<th>Team Name</th>
					<th>Total Players</th>
					<th>Players Left</th>					
					<th>Kills</th>
					<th>Avg Kills</th>
				</thead>
				<tbody>
						<%
						_.each(teams, function(team, name) {						
						%>
						<tr>
							<td style="width:<%=team_col_width%>%"><%=name%></td>
							<td style="width:<%=team_col_width%>%"><%=team.players%></td>
							<td style="width:<%=team_col_width%>%"><%=team.alive%></td>
							<td style="width:<%=team_col_width%>%"><%=team.kills%></td>
							<td style="width:<%=team_col_width%>%"><%=parseFloat(team.kills/team.players).toFixed(2)%></td>							
						</tr>					
						<%
						})
						%>
				</tbody>
			</table>
		<% } %>
	</script>

	<script type="text/template" id="rules-template">
		<%= rules %>
	</script>
	
  <script src="js/config.js" type="text/javascript" ></script>    
  <script src="/bower_components/jquery/dist/jquery.js" type="text/javascript" ></script>  
  <script src="/bower_components/underscore/underscore.js" type="text/javascript" ></script>
  <script src="/bower_components/backbone/backbone.js" type="text/javascript" ></script>
  <script src="/bower_components/bootstrap/dist/js/bootstrap.js" type="text/javascript" ></script>
  <script src="js/lib/facebook-sdk.js" type="text/javascript" ></script>
  <script src="/bower_components/base64/base64.js" type="text/javascript" ></script>
  <script src="/bower_components/datatables/media/js/jquery.dataTables.js" type="text/javascript" charset="utf8"></script>
  <script src="/bower_components/datatables-bootstrap3/BS3/assets/js/dataTables.js" type="text/javascript" charset="utf8"></script>


  <script src="js/models/constants.js" type="text/javascript" ></script>
  <script src="js/models/session.js" type="text/javascript" ></script>
  <script src="js/models/profile.js" type="text/javascript" ></script>
  <script src="js/models/target.js" type="text/javascript" ></script>
  <script src="js/models/leaderboard.js" type="text/javascript" ></script>
  <script src="js/models/rules.js" type="text/javascript" ></script>
  
  <script src="js/views/profile-view.js" type="text/javascript" ></script>
  <script src="js/views/target-view.js" type="text/javascript" ></script>
  <script src="js/views/leaderboard-view.js" type="text/javascript" ></script>
  <script src="js/views/rules-view.js" type="text/javascript" ></script>
  <script src="js/views/app-view.js" type="text/javascript" ></script>

  <script src="js/models/nav.js" type="text/javascript" ></script>
  <script src="js/views/nav-view.js" type="text/javascript" ></script>

  <script src="js/models/select-games.js" type="text/javascript" ></script>
  <script src="js/models/user-games.js" type="text/javascript" ></script>
  <script src="js/views/select-game-view.js" type="text/javascript" ></script>
  <script src="js/views/nav-game-view.js" type="text/javascript" ></script>


  <script src="js/views/login-view.js" type="text/javascript" ></script>
  <script src="js/routers/baserouter.js" type="text/javascript" ></script>
  <script src="js/routers/router.js" type="text/javascript" ></script>
  <script src="js/app.js" type="text/javascript" ></script>
</head>
<body>




<section id="app">
	<section id="nav_body">

	</section>
	<section id="app_body"  class="container">
	
	</section>
	
	

</section>


<script type="text/javascript">

</script>

</body>
</html>